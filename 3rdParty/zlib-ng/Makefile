#@XZBUILD
#@XZBUILD@description@zlib replacement with optimizations for "next generation" systems
#@XZBUILD@version@1.9.9

BUILD_TYPE	:= static

include $(PROJPATH)/Makebase.mk

CSRCS		+= $(wildcard arch/i386/*.c)
EXCEPT_C	 = arch/i386/crc_folding.c
INCPATH		+= -I./
CXXFLAGS += -D_LARGEFILE64_SOURCE=1 -DHAVE_HIDDEN -DZLIB_COMPAT -DWITH_GZFILEOP -DHAVE_INTERNAL -DHAVE_BUILTIN_CTZL -DMEDIUM_STRATEGY -DX86_NOCHECK_SSE2 -DUNALIGNED_OK -DUNROLL_LESS -DX86_CPUID -DX86_SSE2_FILL_WINDOW -DX86_QUICK_STRATEGY -DHAVE_UNISTD_H -DHAVE_STDARG_H

ifeq ($(XZMK_HAS_PCLMUL),1)
	CXXFLAGS	+= -DX86_PCLMULQDQ_CRC
endif

ifeq ($(XZMK_HAS_SSE4_2),1)
	CXXFLAGS	+= -DX86_SSE4_2_CRC_HASH -DX86_SSE4_2_CRC_INTRIN
endif

NAME	= zlib-ng

include $(PROJPATH)/MakeTargets.mk
